{"version":3,"sources":["webpack://clientcard/./public/components/CardComponent-ui.html","webpack://clientcard/./public/components/greetingComponent-ui.html","webpack://clientcard/./public/api/request.js","webpack://clientcard/./public/components/base_component/BaseComponent.js","webpack://clientcard/./public/components/cardFiller.js","webpack://clientcard/./public/components/greetingComponent.js","webpack://clientcard/./public/decorators/BaseDecorator.js","webpack://clientcard/./public/decorators/InputDecorator.js","webpack://clientcard/./public/decorators/InputIntegerDecorator.js","webpack://clientcard/./public/decorators/WriteEditor.js","webpack://clientcard/./public/i18n.js","webpack://clientcard/./public/messaging/Socket.js","webpack://clientcard/./public/utils/DomUtils.js","webpack://clientcard/./public/utils/DynamicClass.js","webpack://clientcard/./public/utils/cssUtils.js","webpack://clientcard/./public/utils/errorHandler.js","webpack://clientcard/./public/utils/stringUtils.js","webpack://clientcard/./shared/Curryng.mjs","webpack://clientcard/./shared/ObjectUtils.mjs","webpack://clientcard/webpack/bootstrap","webpack://clientcard/webpack/runtime/define property getters","webpack://clientcard/webpack/runtime/hasOwnProperty shorthand","webpack://clientcard/webpack/runtime/make namespace object","webpack://clientcard/./public/app_src.js"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA,iEAAe,IAAI,E;;;;;;;;;;;;;;ACHnB;AACA;AACA;AACA,iEAAe,IAAI,E;;;;;;;;;;;;;;;ACFnB;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS,SAAS,OAAO;AACnC;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;;AAEA,8BAA8B,gBAAgB;AAC9C;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;;AAGA,UAAU,SAAS,GAAG,KAAK;AAC3B;AACA;AACA;AACA;AACA,GAAG;AACH;;;;AAIA;;AAEA,8BAA8B,oCAAoC;AAClE;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA,EAAE;AACF;;;;AAIA;AACA,SAAS,SAAS,iBAAiB,QAAQ;AAC3C;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;;AAGA,UAAU,SAAS,iBAAiB,OAAO;AAC3C;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,iEAAe,CAAC;AAChB;AACA;AACA;AACA;AACA;AACA,uBAAuB,EAAC;;;;;;;;;;;;;;;;;;;;;;AC3H4C;AACrB;AAC8B;AACpB;AACF;AACG;;AAE3C;;AAEf;AACA;AACA;AACA;AACA;AACA,iCAAiC,yEAAqB;AACtD;AACA;AACA;AACA,6BAA6B,+DAAW;AACxC;AACA;;AAEA;;AAEA;AACA;AACA,oEAAoE,UAAU;AAC9E,yBAAyB,wCAAwC;AACjE;AACA;;;AAGA;AACA;AACA;AACA;AACA,qBAAqB,gEAAW;AAChC;AACA,OAAO;AACP;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,WAAW,2DAAY;AACvB;AACA;;AAEA;AACA;;;AAGA;AACA,yBAAyB,GAAG;AAC5B;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,2BAA2B,2EAA4B;;AAEvD;AACA;AACA,QAAQ,+DAAW;AACnB;AACA,OAAO;AACP;;AAEA;AACA,MAAM,8EAA+B;AACrC;;AAEA,uBAAuB,+DAAgB,SAAS,sDAAM,CAAC;;;AAGvD,2CAA2C,+DAAW,mBAAmB,sDAAM;;AAE/E;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAsB;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAsB;AAC5B;AACA;AACA,8BAA8B,+DAAW,mBAAmB,uDAAO;AACnE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC5P6C;AACF;AACmB;;AAE/C,4BAA4B,qEAAa;AACxD;AACA,oBAAoB,2DAAI;AACxB;AACA;AACA;AACA,gBAAgB,eAAe;AAC/B,cAAc,iBAAiB;AAC/B,eAAe,kBAAkB;AACjC;AACA,kBAAkB;;AAElB;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA,G;AACA,2CAA2C,8DAAM;AACjD;AACA;AACA;;;;;;;;;;;;;;;;;;;ACvD8B;AACiB;AACe;;;;AAI/C,gCAAgC,qEAAa;AAC5D;AACA,oBAAoB,+DAAI;AACxB,uBAAuB,eAAe;AACtC;;AAEA;AACA;AACA;;AAEA;AACA,oC;AACA,aAAa,uDAAc;AAC3B,mBAAmB,yDAAgB,CAAC,gEAAuB;AAC3D;AACA;;AAEA;;;;;;;;;;;;;;;;;ACtBe;;AAEf;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA,+D;AACA;;AAEA,mCAAmC,GAAG,QAAQ;AAC9C;;AAEA;;;;;;;;;;;;;;;;;AChC8C;AAC/B,6BAA6B,sDAAa;;AAEzD;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AClBiD;;AAElC,oCAAoC,uDAAc;;AAEjE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2B;AACA;AACA;AACA;;;AAGA,eAAe,uCAAuC;AACtD,eAAe,+BAA+B;AAC9C;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;AC1D8C;AACE;;AAEjC;AACf;AACA,kBAAkB,sDAAa;AAC/B,mBAAmB,uDAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,4CAA4C;AAChD,GAAG,4CAA4C;;AAE/C;AACA;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;AChC4C;;AAE5C,mBAAmB,EAAE;;AAErB;AACA,EAAE,mCAAmC,EAAE;AACvC;;AAEA;AACA;AACA,SAAS,8DAAM;AACf;;AAEA;AACA;AACA;AACA;;AAEA,iEAAe,CAAC,qCAAqC,EAAC;;;;;;;;;;;;;;;AClBtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD,iEAAe,iBAAiB,E;;;;;;;;;;;;;;;ACnBQ;;AAExC;;AAEA;AACA;AACA,YAAY,YAAY;AACxB,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA,4B;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,4DAAK;;AAE3B;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,OAAO;AACP;AACA,O;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA,2B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,gDAAgD,UAAU;AAC1D,qBAAqB,QAAQ,GAAG,UAAU,KAAK,QAAQ,IAAI,QAAQ;AACnE;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,QAAQ,E;;;;;;;;;;;;;;ACvIR;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA,yBAAyB,sBAAsB,eAAe;AAC9D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;;;;ACbe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,C;;;;;;;;;;;;;;ACfe;AACf,kCAAkC,qBAAqB,qBAAqB;AAC5E;;;;;;;;;;;;;;;ACFA;AACA;AACA;;;AAGA,iEAAe,KAAK,E;;;;;;;;;;;;;;ACLpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA,iEAAe,WAAW,E;;;;;;UCnB1B;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;;;;;;;;;;;ACNuC;AAC0B;AACX;AACV;AACS;AACJ;;AAEjD;AACA;AACA;;AAEA;;;;AAIA;AACA,yE;AACA,+D;AACA,qBAAqB,8DAAa;AAClC,0BAA0B,qEAAiB;AAC3C;;AAEA,gBAAgB,qEAA6B;AAC7C,mBAAmB,cAAc;AACjC,6B;AACA,oB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,C;;AAEA;;;AAGA,sBAAsB,QAAQ,eAAe;AAC7C;AACA,wB;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA,EAAE,qEAAyB;AAC3B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,0BAA0B,8DAAM;;AAEhC;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;;AAEH;AACA,EAAE;AACF;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA,EAAE;AACF,EAAE,+DAAW;AACb;AACA,EAAE","file":"app.js","sourcesContent":["// Module\nvar code = \"<div class=\\\"card\\\" id=\\\"section\\\">\\n  <div class=\\\"card-image\\\">\\n    <figure class=\\\"image\\\" id=\\\"qrHolder\\\">\\n      \\n    </figure>\\n  </div>\\n  <div class=\\\"card-content\\\">\\n    <div class=\\\"media\\\">\\n      \\n      <div class=\\\"media-content\\\">\\n        <a class=\\\"title is-4\\\" id=\\\"card-title\\\">Something</p>\\n        \\n      </div>\\n    </div>\\n\\n    <div class=\\\"content\\\">\\n     <p>\\n     \\t<strong>Puntos: </strong><span id=\\\"card-points\\\"></span>\\n     </p>\\n    </div>\\n  </div>\\n</div>\";\n// Exports\nexport default code;","// Module\nvar code = \"<section class=\\\"section\\\">\\n\\t<div class=\\\"container\\\">\\n\\t  <h1 class=\\\"title\\\" id=\\\"greeting\\\"/>\\n\\t</div>\\n</section>\\n\\n\";\n// Exports\nexport default code;","\nconst basePath = \"/api\";\nconst cardPath = basePath+\"/cards\";\n\n\nfunction getCards(callBack){\n\tfetch(cardPath)\n\t.then(response => response.json())\n\t.then(data => {\n\t\tconsole.log(data);\n\t\tcallBack(data);\n\t\t});\n}\n\n\nfunction getBrands(callBack){\n\tfetch(basePath+\"/brands\")\n\t.then(response => response.json())\n\t.then(data => {\n\t\tconsole.log(data);\n\t\tcallBack(data);\n\t\t});\n}\n\nfunction getCardsByClient(userId,callBack){\n\tfetch(`${cardPath}/owner/${userId}`)\n\t.then(response => response.json())\n\t.then(data => {\n\t\tconsole.log(data);\n\t\tcallBack(data);\n\t\t});\n}\n\n\nfunction findCards(uuid,opID,callBack){\n\n\tlet body =  JSON.stringify( {operatorID:opID});\n\tconst headers = new Headers({\n\t    \"Content-Type\": \"application/json\",\n\t    \"Content-Length\": JSON.stringify(body).length\n\t});\n\n\tconst options = {\n    \tmethod: 'POST',\n    \tbody: body,\n    \theaders: headers\n\t};\n\n\n\tfetch(`${cardPath}/${uuid}`,options)\n\t.then(response => response.json())\n\t.then(data => {\n\t\tconsole.log(data);\n\t\tcallBack(data);\n\t\t});\n}\n\n\n\nfunction credit(opID, uuid,totalSale,callBack){\n\n\tlet body =  JSON.stringify( {totalSale:totalSale,operatorID:opID});\n\tconst headers = new Headers({\n\t    \"Content-Type\": \"application/json\",\n\t    \"Content-Length\": JSON.stringify(body).length\n\t});\n\n\tconst options = {\n    \tmethod: 'POST',\n    \tbody: body,\n    \theaders: headers\n\t};\n\n\tfetch(`/api/transactions/credit/${uuid}`,options)\n\t.then(response => response.json())\n\t.then((data) => {\n\t\tcallBack(data);\n\t});\n}\n\n\n\nfunction getCartdsTemplate(brandId, callBack){\nfetch(`${basePath}/card-template/${brandId}`)\n\t.then(response => response.json())\n\t.then(data => {\n\t\tconsole.log(data);\n\t\tcallBack(data);\n\t\t});\n}\n\n\n\n\nfunction updateCardTemplate(cardId,body,callBack){\n\n\tlet strBody = JSON.stringify(body);\n\tconst headers = new Headers({\n\t    \"Content-Type\": \"application/json\",\n\t    \"Content-Length\": strBody.length\n\t});\n\n\tconst options = {\n    \tmethod: 'PATCH',\n    \tbody: strBody,\n    \theaders: headers\n\t};\n\n\n\tfetch(`${basePath}/card-template/${cardId}`,options)\n\t.then(response => response.json())\n\t.then(data => {\n\t\tconsole.log(data);\n\t\tcallBack(data);\n\t\t});\n}\n\nexport default {getCards, \n\t\t\t\tfindCards,\n\t\t\t\tcredit,\n\t\t\t\tgetCardsByClient,\n\t\t\t\tgetBrands,\n\t\t\t\tgetCartdsTemplate,\n\t\t\t\tupdateCardTemplate};\n\n ","import {loading,danger, toggleClass} from \"../../utils/cssUtils.js\";\nimport DomUtils from \"../../utils/DomUtils.js\";\nimport InputIntegerDecorator from \"../../decorators/InputIntegerDecorator.js\"\nimport WriteEditor from \"../../decorators/WriteEditor.js\"\nimport DynamicClass from \"../../utils/DynamicClass.js\";\nimport getProperty from \"../../../shared/ObjectUtils.mjs\";\n\nexport default class BaseComponent{\n\n  constructor(container, html, modelEditors ) {\n    let content = html? html: this.baseHTML();\n    this.container = container;\n    container.innerHTML = content;\n    this.htmlDecorators = [];\n    this.htmlDecorators.push(new InputIntegerDecorator());\n    this.modelEditors = modelEditors;\n    if(modelEditors){\n      this.editors = [];\n      this.writeEditor = new WriteEditor();\n    }\n  }\n\n  configureModelEditors(){\n\n    for(let key in this.modelEditors){\n      let modelName = this.modelEditors[key].name;\n      let uiElements  = this.container.querySelectorAll(`[model*=\"${modelName}\"]`);\n      this.editors.push({model:modelName, uiElements: uiElements});\n    }\n  }\n\n\n  setModel(modelName, model){\n      let editor = this.editors.find(el=> el.model == modelName);\n      editor.uiElements.forEach(el=>{\n        let path = el.getAttribute(\"model\");\n        let value  = getProperty(path, model);\n        this.writeEditor.write(el, value);\n      })\n  }\n\n  /**\n   * [getUIElements description]\n   * @return {[type]} [description]\n   */\n   getUIElements(){\n    return this.uiElements;\n    }\n\n    addForm(formName, element){\n       if(!element){\n        return;\n      }\n      if(!this[formName]){\n        this[formName] = {formName:formName, uiElements:[]}\n      }\n      if(this[formName].uiElements.indexOf(element)<0){\n        this[formName].uiElements.push(element);\n      }\n    }\n\n getValues(formName){\n     if(!formName){\n      return;\n    }\n    if(!this[formName]){\n      return;\n    }\n    let formObject = {};\n    for (let key in this[formName].uiElements) {\n      let element = this[formName].uiElements[key].el;\n      formObject[element.name] = element.value;\n    }\n    return formObject;\n  }\n\n  getFormElements(formName){\n     if(!formName){\n      return;\n    }\n    if(!this[formName]){\n      return;\n    }\n\n    return this[formName].uiElements;\n  }\n\n\n\n\n  affectOthers(formName, component, callBack){\n    if(this[formName]){\n     for (let key in this[formName].uiElements) {\n      if(this[formName].uiElements[key] != component){\n       callBack(this[formName].uiElements[key]);\n     }\n   }\n  }\n}\n\n\ninvalidate(errors){\n  for (let error in errors) {\n    for (let key in this.uiElements) {\n      let  inputName =this.uiElements[key].el.name;\n      if( inputName==errors[error].typeOfError){\n        this.uiElements[key].invalidate(true);\n        this.uiElements[key].errorMessage(errors[error].errorMessage);\n      }\n    }\n  }\n}\n\n  block(formName, component){\n   const disable = (key)=>\n   {\n    key.el.disabled=true\n  };\n  this.affectOthers(formName, component, disable);\n  }\n\n\n\n  unblock(formName, element){\n    const disable = (key)=>\n    {\n     key.el.disabled=false\n   };\n   this.affectOthers(formName, element, disable);\n  }\n\n  clearContent(formName,element){\n    const callBack = (key)=>\n    {\n      key.clearHelper();\n      key.invalidate(false);\n      key.el.value = null;\n    };\n    this.affectOthers(formName, element, callBack);\n  }\n\n  clearAll(formName,element){\n    const callBack = (key)=>\n    {\n      key.clearHelper();\n      key.invalidate(false);\n    };\n    this.affectOthers(formName, element, callBack);\n  }\n\n  init(){\n  \tfor (let key in this.uiElements) {\n\n     this.uiElements[key].el = this.container.querySelector(this.uiElements[key].id);\n\n\n     let el =    this.uiElements[key].el;\n     this.htmlDecorators.forEach(decorator=>{\n      if(decorator.predicate(el)){\n        decorator.decorate(el);\n      }\n    });\n\n     if(this.uiElements[key].decorator){\n       let decoratorHolder = this.uiElements[key].decorator;\n\n       let decorator =  \n       new DynamicClass(\n        decoratorHolder.class,\n        decoratorHolder.action);\n\n       decorator.decorate(el);\n     }\n\n\n     let id=this.uiElements[key].id.substring(1);\n     let query = `[for=${id}]`;\n     let fieldContainer = this.container.querySelector(query);\n     this.uiElements[key].fieldContainer = fieldContainer;\n\n\n     let component =this.uiElements[key];\n\n     if(component.listener){\n      let listener  = component.listener;\n      component.el.addEventListener(listener.event, listener.fallBack);\n     }\n     if(component.isFileInput){\n\n      let fileLabelComponent =  fieldContainer.querySelector(\".file-label\");\n\n      component.fileName = DomUtils.createFileNameLabel(\"...\");\n\n      fileLabelComponent.appendChild(component.fileName);\n      component.el.addEventListener('change',(e=>{\n        toggleClass(fieldContainer,true,\"is-success\");\n        component.fileName.innerHTML = e.srcElement.files[0]?.name;\n      }));\n    }\n\n    if(component.isPasswordInput){\n      DomUtils.configurePasswordInput( component.el,this.container);\n    }\n\n    component.helper = DomUtils.createP(`help ${danger}`);\n\n\n    component.invalidate =  function(flag){toggleClass(component.el,flag,danger)};\n\n    component.errorMessage = (message)=> {\n      if(!component.fieldContainer){\n        return;\n      }\n      component.helper.innerHTML = message;\n      component.fieldContainer.hasHelper=true;\n      DomUtils.toggleElement(component.helper,true, component.fieldContainer);\n    };\n    component.clearHelper = ()=> {\n\n      if(!component.fieldContainer || !component.fieldContainer.hasHelper){\n        return;\n      }\n      component.fieldContainer.hasHelper=false;\n      component.helper.innerHTML = null;\n      DomUtils.toggleElement(component.helper,false, component.fieldContainer);\n      component.invalidate(false);\n    };\n    component.load = (flag)=>{toggleClass(component.el,flag,loading)};\n  }\n\n  this.configureModelEditors();\n}\n\nbaseHTML(){\n  return `\n  <section class=\"section\">\n  <div class=\"container\">\n  <div class=\"columns\">\n  <div class=\"column\"></div>\n  <div class=\"column is-four-fifths\">\n  <div class=\"hero\">\n  <div class=\"container\" id=\"mainComponent\">\n\n  </div>\n  </div>\n  </div>\n  <div class=\"column\"></div>\n  </div>\n  </div>\n  </section>\n  `;\n}\n}\n","import escape from \"../utils/stringUtils.js\";\nimport html from \"./CardComponent-ui.html\";\nimport BaseComponent from \"./base_component/BaseComponent.js\";\n\nexport default class CardComponent extends BaseComponent{\n  constructor(container) {\n  \tsuper(container, html);\n    this.type  = \"read-only\";\n    this.qrcode = null;\n\tthis.uiElements = {\n\t\tqrComponent: {id:\"#qrHolder\"},\n\t\tcardTitle: {id:\"#card-title\"},\n\t\tcardPoints: {id:\"#card-points\"},\n\t};\n\tthis.mapColor = {\"1\":\"#ff0000\",\"2\":\"#ff00ff\"};\n    \n  }\n\n  qRSizes(pageWidth){\n  \tif(pageWidth<200){\n  \t\treturn 150;\n  \t}else if(pageWidth >200 && pageWidth < 500){\n  \t\treturn pageWidth-50;\n  \t}else{\n  \t\treturn 500;\n  \t}\n  }\n\n  init(){\n  \tsuper.init();\n  }\n\n  createCardElement(card){\n\n\t  \tlet pageWidth = document.body.clientWidth;\n\t\tlet width, height;\n\t\twidth = height = this.qRSizes(pageWidth);\n\t\n\t\tlet qrColor  = this.mapColor[card.brand.brandColor]||\"#000000\";\n  \t\tthis.qrcode = new QRCode(this.uiElements.qrComponent.el, {\n\t\t\t\t\t\twidth : width,\n\t\t\t\t\t\theight : height,\n\t\t\t\t\t\tcolorDark: qrColor,\n\t\t\t\t\t\tlogo: card.brand.logoURL\n\t\t\t\t\t});\n  \t\t\n\t\tthis.qrcode.makeCode(card.value);\n\t\tlet qrElement = document.querySelector(\"#qrElement\");\n\t\tif(qrElement){\n\t\t\tqrElement.focus();\n\t\t\tconsole.log(\"Centering app to qrCode\");\n\t\t} \n\t\tthis.uiElements.cardTitle.el.innerHTML = escape(card.brand.name);\n\t\tthis.uiElements.cardPoints.el.innerHTML = card.points;\n  }\n}\n\n","import i18n from \"../i18n.js\";\nimport html from \"./greetingComponent-ui.html\";\nimport BaseComponent from \"./base_component/BaseComponent.js\";\n\n\n\nexport default class GreetingComponent extends BaseComponent {\n  constructor(container) {\n  \tsuper(container, html);\n    this.uiElements = {greetingTitle:{id:\"#greeting\"}};\n  }\n\n  init(){\n  \tsuper.init();\n\tlet greetingTitle = this.uiElements.greetingTitle.el;\n\t\n\tlet cookieStr = document.cookie;\n\tlet cookie = JSON.parse(cookieStr);  \n\tconsole.log(i18n.messageEs);\n\tlet greetingMsg = i18n.interpolate(i18n.messageEs[0].value, cookie.user.name);\n\tgreetingTitle.innerHTML = greetingMsg;\n  }\n  \n}\n\n","\nexport default class BaseDecorator{\n\n\tconstructor(events=[])\n\t{\n\t\tthis.events =events;\n\t}\n\n\t/**\n\t * [predicate description]\n\t * @param  {[type]} obj [description]\n\t * @return {[type]}     [description]\n\t */\n\t predicate(obj){\n\t \tlet isHTML =  obj instanceof HTMLElement;\n\t \treturn isHTML;\n\t }\n\n\t/**\n\t * [decorate description]\n\t * @param  {[type]} element [description]\n\t * @return {[type]}             [description]\n\t */\n\t decorate(element){\n\n\t \tfor (let key in this.events) {\n\t \t\tlet event = this.events[key];\n\t \t\telement.addEventListener(event.name,event.listener, false);\t\n\t \t}\n\n\t \tconsole.log(`Decorating element; ${element}`);\n\t }\n\n\t}\n","\nimport BaseDecorator from \"./BaseDecorator.js\"\nexport default class InputDecorator extends BaseDecorator{\n\n\tconstructor(events)\n\t{\n\t\tsuper(events);\n\t}\n\n\t/**\n\t * [predicate description]\n\t * @param  {[type]} obj [description]\n\t * @return {[type]}     [description]\n\t */\n\t predicate(obj){\n\t \tvar tagName = obj.tagName.toLowerCase();\n\t \tlet isInput\t=  tagName == \"input\";\n\t \treturn super.predicate(obj) && isInput;\n\t }\n\t}\n","\nimport InputDecorator from \"./InputDecorator.js\";\n\nexport default class InputIntegerDecorator extends InputDecorator{\n\n\tconstructor()\n\t{\n\t\t\n\t\tlet events = [];\n\t\tconst onkeyListener = (event)=>{\n\t\t\tlet srcElement = event.srcElement;\n\t\t\tif(srcElement.getAttribute(\"max\")){\n\t\t\t\tlet max = srcElement.getAttribute(\"max\");\n\t\t\t\tlet result = srcElement.value+\"\"+event.key;\n\t\t\t\tif(Number(result)>max){\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif(event.key==\".\"){\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconst onPaste = (event)=>{\n\t\t\tlet paste = (event.clipboardData || window.clipboardData).getData('text');\n\t\t\tlet srcElement = event.srcElement;\n\t\t\tif(srcElement.getAttribute(\"max\")){\n\t\t\t\tlet max = srcElement.getAttribute(\"max\");\n\t\t\t\tlet currentValue = srcElement.value;\n\t\t\t\tif(Number(paste+currentValue)>max){\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(paste.includes(\".\")){\n\t\t\t\tevent.preventDefault();\t\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\n\t\tevents.push({name:\"keydown\" ,listener:onkeyListener});\n\t\tevents.push({name:\"paste\" ,listener:onPaste});\n\t\tsuper(events);\n\t}\n\n\t/**\n\t * [predicate description]\n\t * @param  {[type]} obj [description]\n\t * @return {[type]}     [description]\n\t */\n\t predicate(obj){\n\t \t\n\t \tlet isNumber  =  obj.type == \"number\";\n\t \treturn super.predicate(obj) && isNumber;\n\t }\n\n\t}\n","import BaseDecorator from \"./BaseDecorator.js\"\nimport InputDecorator from \"./InputDecorator.js\"\n\nexport default class WriteEditor{\n\tconstructor(){\n\t\tlet base =  new BaseDecorator();\n\t\tlet input =  new InputDecorator();\n\t\tlet normalHTML = (el, model)=>{\n\t\t\tel.innerHTML = model;\n\t\t};\n\t\tlet inputHTML = (el, model)=>{\n\t\t\tel.value = model;\n\t\t};\n\t\tlet chain = \n\t\t[{predicate:base.predicate, action:normalHTML},\n\t\t{predicate:input.predicate, action:inputHTML}];\n\n\t\tthis.chain = chain;\n\t}\n\n\twrite(el, model){\n\t\tlet last = null;\n\t\t\n\t\tfor (var i = 0;  i < this.chain.length; i++) {\n\t\t\tlet decorator = this.chain[i];\n\t\t\tif(decorator.predicate(el)){\n\t\t\t\tlast = decorator.action;\n\t\t\t}\n\t\t}\n\n\t\tlast(el,model);\n\t}\n}\n","import escape from \"./utils/stringUtils.js\";\n\nconst pattern = \"${0}\";\n\nconst messageEs = [\n\t{id:\"greeting\", value:\"Bienvenido ${0}\"}\n]\n\nfunction interpolate( template, data){\n  let result = template.replace(pattern, data);\n  return escape(result);\n}\n\nfunction moneyMatcher(input){\n\tlet result = input.match(this.moneyPattern);\n\treturn result;\n}\n\nexport default {messageEs, interpolate, moneyMatcher};\n","const WebSocketInstance = (function (){\n\tvar instance;\n\n\tfunction createInstance(){\n\t\tvar object = io();\n\t\treturn object;\n\t}\n\n\treturn {\n\t\tgetInstance : function(){\n\t\t\tif(!instance){\n\t\t\t\tinstance = createInstance();\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t}\n})();\n\n\nexport default WebSocketInstance;","import curry from \"/shared/Curryng.mjs\";\n\n//ui-form utils\n\n/**\n * [configurePasswordInput description]\n * @param  {HTMLElement} component [inputElement]\n * @param  {HTMLElement} container [parent element]\n */\nfunction configurePasswordInput(component, container) {\n    let divContainers =  [...container.querySelectorAll(`[is-password=true]`)];\n    const parentContainer = divContainers.filter((el)=>{\n    \tconsole.log(el);\n    \tfor(let i = 0; i < el.childNodes.length; i++){\n    \t\tlet children = el.childNodes[i];\n    \t\tif( children === component){\n    \t\t\treturn true;\n    \t\t}\n    \t}\n    })[0];\n\n    \n    let iconBtn =  parentContainer.querySelectorAll(\"a\")[0];\n    let icon =  iconBtn.querySelectorAll(\"i\")[0];\n    let iconStore = true;\n    iconBtn.addEventListener(\"click\",()=>{\n    \tif(iconStore){\n\t    \ticon.className = \"fas fa-eye\";\n\t    \tcomponent.type=\"text\";\t\n    \t}else{\n    \t\ticon.className = \"fas fa-eye-slash\";\n    \t\tcomponent.type=\"password\";\n    \t}\n    \ticonStore^=true;\n    })\n\n}\n/**\n * [Remove all children from node]\n * @param  {[type]} parent [description]\n * @return {[type]}        [description]\n */\nfunction removeAllChildNodes(parent) {\n    while (parent.firstChild) {\n        parent.removeChild(parent.firstChild);\n    }\n}\n\nconst _createAppend = curry(createAppend);\n\nfunction createRows(rows){\n\tlet htmlRows = [];\n\tfor(var i = 0; i< rows.length; i++){\n\t\tlet row = createAppend(\"tr\",null);\n\t\tfor (let key in rows[i]) {\n\t\t\tlet col = createAppend(\"th\",null,create(\"abbr\",null, rows[i][key]));\n\t\t\trow.appendChild(col);\n\t\t}\n\t\t\n\t\thtmlRows.push(row);\n\t}\n\treturn htmlRows;\n}\n\nfunction createTable(columns){\n\t\n\t\n\tconst _tEl =(el)=>{\n\t\tlet _t = _createAppend(el,null);\n\t\tlet theadResult = null;\n\t\tfor(var i = 0; i< columns.length; i++){\n\t\t    if(!theadResult){\n\t\t      theadResult = _t(createAppend(\"th\",null,create(\"abbr\",null, columns[i])));\n\t\t    }else{\n\t\t      theadResult = theadResult(createAppend(\"th\",null,create(\"abbr\",null, columns[i])))\n\t\t    }  \n\t\t}\n\t\treturn theadResult;\n\t}\n\n\tlet _tBody = createAppend(\"tbody\",null);\n\tlet result = _createAppend(\"table\",\"table is-hoverable\")(_tEl(\"thead\")())(_tBody)();\n\tresult._tBody = _tBody;\n\treturn result;\n}\n\n\n\nfunction createAppend(tagName, className,...args){\n  let el  =  document.createElement(tagName);\n  if(className&&className!=null){\n  \tel.className= className;\t\n  }\n  args.forEach((i)=>el.appendChild(i));\n  return   el;\n}\n\n\nfunction create(tagName, className, content){\n\tlet div  =  document.createElement(\"div\");\n\tclassName=className&&className!=null?`class=\"${className}\"`:\"\";\n\tdiv.innerHTML = `<${tagName} ${className} \">${content}</${tagName}>`;\n\treturn  div.firstChild;\n}\n\n\nfunction createP(className, content){\n\treturn  create(\"p\",className,content);\n}\n\n\nfunction fileNameLabel( content){\n\treturn  create(\"p\",\"file-name\",content);\n}\n\nfunction toggleElement (p, flag, el){\n\t  \tif(flag){\n\t  \t\tel.appendChild(p);\n\t  \t}else{\n\t\t\tel.removeChild(p);\n\t  \t}\n}\n\nconst DomUtils = {};\n\nDomUtils.removeAllChildNodes = removeAllChildNodes;\nDomUtils.create = create;\nDomUtils.createP = createP;\nDomUtils.toggleElement = toggleElement;\nDomUtils.createFileNameLabel = fileNameLabel;\nDomUtils.createTable = createTable;\nDomUtils.createRows = createRows;\nDomUtils.createAppend = createAppend;\nDomUtils._createAppend = _createAppend;\nDomUtils.configurePasswordInput = configurePasswordInput;\nexport default DomUtils;","export default class DynamicClass {\n  constructor (klass, ...opts) {\n    return new klass(...opts);\n  }\n}","const loading = \"is-loading\";\nconst danger = \"is-danger\";\nconst consoleStyle =\n {\n \tdefault:\"color:#2c7800;font-family:system-ui;font-size:1rem;\"\n }\nfunction toggleClass (el, flag, newClass){\n\tlet className = el.className;\n\t  \tif(flag){\n\t  \t\tel.className = className.concat(\" \"+newClass);\n\t  \t}else{\n\t\t\tel.className = className.replace(newClass,\"\");\n\t  \t}\n}\nexport {loading,danger,toggleClass, consoleStyle};","export default function handleError(error){\n\tlet errorContainer = document.createElement(\"div\");\n\n\tlet errorBanner = document.createElement(\"p\");;\n\terrorBanner.innerHTML =\"Something went wrong\";\n\terrorBanner.className = [\"danger\"];\n\n\tlet errorMsg = document.createElement(\"p\");\n\terrorMsg.innerHTML = error;\n\t\n\terrorContainer.appendChild(errorBanner);\n\terrorContainer.appendChild(errorMsg);\n\n\tdocument.getElementsByTagName(\"body\")[0].appendChild(errorContainer);\n\n}","export default function escape(string) {\n\treturn string.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n}\n","function curry(fn, ...values) {\n    return (...next) => (next.length) ? curry(fn, ...values, ...next) : fn(...values);\n}\n\n\nexport default curry;","function getProperty(path, model){\n\tlet paths  = path.split(\".\");\n\treturn getNestedProperty(0, paths, model);\n\n}\nfunction getNestedProperty(index, paths, model){\n\tif(!model){\n\t\treturn;\n\t}\n\tif(index>=paths.length){\n\t\treturn model;\n\t}\n\n\tlet property  = model[paths[index]];\n\tindex++;\n\treturn getNestedProperty(index, paths, property);\n}\n\n\nexport default getProperty;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import requests from \"./api/request.js\"\nimport GreetingComponent from \"./components/greetingComponent.js\"\nimport CardComponent from \"./components/cardFiller.js\"\nimport escape from \"./utils/stringUtils.js\";\nimport WebSocketInstance from \"./messaging/Socket.js\"\nimport handleError from \"./utils/errorHandler.js\"\n\nconst componentsArray = [];\nconst currentUserId = 1;\nlet  cardComponent;\n\nconst store = {};\n\n\n\nfunction configureComponents(){\n\tlet greetingContainer = document.querySelector(\"#greetingComponent-ui\");\t\n\tlet cardContainer = document.querySelector(\"#card-column-ui\");\t\n\tcardComponent = new CardComponent(cardContainer);\n\tcomponentsArray.push(new GreetingComponent(greetingContainer));\n\tcomponentsArray.push(cardComponent);\n\n\tconst socket = WebSocketInstance.getInstance();\n\tsocket.on(`send/${currentUserId}`, (arg)=>{\n\t\tlet card = JSON.parse(arg); \n\t\tconsole.log(card); \n\t\tlet cards = store.cards;\n\t\tlet index = cards.map((c)=>c.cardId).indexOf(card.cardId);\n\t\tcards[index] = card;\n\t\tstore.cards = cards;\n\t\tcardComponent.createCardElement(card);\n    });\n} \n\nfunction app(){\n \n  \n  document.cookie = '{\"user\":{\"name\":\"Ivan\"}}';\n  console.log(document.cookie);\n  configureComponents(); \n\n  componentsArray.forEach(el=>{\n\tconsole.log(el);\n\tel.init();\n  });\n\n  const cardHolder = document.getElementById(\"card-table\");\n\n  requests.getCardsByClient(currentUserId,cards =>{\n\t  cards.forEach(cardEl=>{\n\t    let row = document.createElement('div');\n\t    row.className = [\"columns\"];\n\t\tlet row1 = document.createElement('div');\n\t\t\n\t\trow1.className = [\"column\"];\n\n\t\tlet brandButton = document.createElement('button');\n\t\tbrandButton.className = [\"button is-fullwidth\"];\n\t\tbrandButton.innerHTML = escape(cardEl.brand.name);\n\n\t\trow1.appendChild(brandButton);\n\n\t\trow.appendChild(row1);\n\t\trow.cardId = cardEl.cardId;\n\t\trow.addEventListener(\"click\",()=>{\n\t\tlet targetCard= store.cards.find(card=>{\n\t\t\treturn card.cardId == row.cardId;\n\t\t})\n\t\tcardComponent.createCardElement(targetCard);\n\t\t});\n\n\t\tcardHolder.appendChild(row);\n\t});\n\tstore.cards = cards;\n   });\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\ttry{\n\t\tapp();\n\t}catch(error){\n\t\thandleError(error);\n\t}\n } , false);\n   \n\n\n\n\n"],"sourceRoot":""}